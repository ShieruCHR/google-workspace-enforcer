# Google Workspace Enforcer

これは、Google アカウントとDiscord アカウントを用いた認証システムを提供するDiscord Botです。  
Google ワークスペースの連絡手段としてDiscord サーバーを用いている場合に便利です。そんなケースはないです。

## 機能

このBotは大まか以下のことができます:

* 入ってきたメンバーが特定の組織のGoogle Workspaceアカウントを所持しているか確認する
* 認証できたらロールをつける

このBotは以下のようなことには向いていません:

* 完璧なセキュリティ
  * もし会社の愚痴サーバーをこのBotで保護しようとしているなら、おそらくバレます。
  * そうじゃなくても、このBotの存在は気休め程度に考えておいてください。
* メンバーのメールアドレスを収集する
  * 既定では、メンバーのメールアドレスはどこにも記録されませんし、収集されません。
  * 収集するように改変しても構いませんが、それによって生じた問題には一切責任を負いません。

## ライセンス

コードはMIT ライセンスのもとライセンスされています。詳細は[LICENSE](LICENSE)を確認してください。

## サポート

サポートはこのリポジトリのIssuesまたは[Discordサーバー](https://discord.gg/67NSm47R7M)で行います。

## Botを使う

### セルフホスト

> Work in progress....

1. `.env-template`を`.env`にコピーします。
1. Discordのアプリケーションを作り、クライアントIDとシークレットを入手します。
1. Googleのプロジェクトを作り、OAuthの同意画面を設定し、`userinfo.email`スコープを追加します。
1. GoogleのOAuth クライアントを作り、クライアントIDとシークレットを入手します。
1. DiscordとGoogleのクライアントIDとシークレットをそれぞれ`.env`に書き込みます。
1. その他の`.env`項目をいい感じに修正し、Botをどこかのサーバーに放り込んだら完成です。

TODO: このいい加減なREADMEをなんとかする

### 公開Bot

現在このBotはセルフホスト専用です。  
公開Botの準備ができたら、[Discordサーバー](https://discord.gg/67NSm47R7M)でご連絡します！

## 使い方

`/panel`でチャンネルにパネルを設置できます。  
これにはサーバーの管理権限が必要です。

メンバーは、設置されたパネルのボタンをクリックするか、  
`/verify`コマンドを実行することで認証を開始できます。
